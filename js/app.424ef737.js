(function(e){function t(t){for(var r,i,c=t[0],u=t[1],o=t[2],m=0,d=[];m<c.length;m++)i=c[m],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&d.push(s[i][0]),s[i]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);l&&l(t);while(d.length)d.shift()();return a.push.apply(a,o||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,c=1;c<n.length;c++){var u=n[c];0!==s[u]&&(r=!1)}r&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},s={app:0},a=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/starnavi-test/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var o=0;o<c.length;o++)t(c[o]);var l=u;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"22b7":function(e,t,n){"use strict";var r=n("a3ff"),s=n.n(r);s.a},"3ed6":function(e,t,n){"use strict";var r=n("5638"),s=n.n(r);s.a},4112:function(e,t,n){},"45ac":function(e,t,n){"use strict";var r=n("f28a"),s=n.n(r);s.a},5638:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"container"},[n("router-view")],1)])},a=[],i=(n("5c0b"),n("2877")),c={},u=Object(i["a"])(c,s,a,!1,null,null,null),o=u.exports,l=n("8c4f"),m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"game"},[n("gameplay"),n("leaders")],1)},d=[],f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"gameplay"},[n("presets"),n("message"),n("gamezone")],1)},p=[],h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pressers"},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.selected,expression:"selected"}],on:{click:e.pressetsSelect,change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selected=t.target.multiple?n:n[0]}}},e._l(e.Presets,(function(t){return n("option",{key:t.name,domProps:{value:t.name}},[e._v(" "+e._s(t.name)+" ")])})),0),n("input",{directives:[{name:"model",rawName:"v-model",value:e.playerName,expression:"playerName"}],attrs:{placeholder:"Enter your name"},domProps:{value:e.playerName},on:{input:function(t){t.target.composing||(e.playerName=t.target.value)}}}),n("button",{attrs:{id:"play"}},[e._v(e._s(this.play?"play again":"play"))])])},v=[],y=(n("4de4"),n("fb6a"),n("b0c0"),n("498a"),n("5530")),g=n("2f62"),b={name:"presets",data:function(){return{selected:"Pick game mode",playerName:""}},computed:Object(y["a"])({},Object(g["b"])(["Presets","play"])),methods:{playGame:function(e){"Pick game mode"===this.selected?(e.preventDefault(),this.$store.commit("resetState")):(this.$store.commit("resetState"),this.$store.commit("selected",this.selected),this.$store.commit("name",""!==this.playerName?this.playerName.trim().slice(0,15):"no name user"))},pressetsSelect:function(){var e=this,t=this.Presets.filter((function(t){return t.name===e.selected?t:""})),n=t[0].field,r=t[0].field;this.$store.commit("lines",n),this.$store.commit("squares",r),this.$store.commit("delay",t[0].delay)}},beforeCreate:function(){this.$store.dispatch("Presets")},mounted:function(){document.getElementById("play").addEventListener("click",this.playGame,!1)}},w=b,S=(n("843b"),Object(i["a"])(w,h,v,!1,null,null,null)),q=S.exports,_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"message"},[n("h3",{directives:[{name:"show",rawName:"v-show",value:e.winner,expression:"winner"}]},[e._v(e._s(e.winner))])])},O=[],j={name:"message",computed:Object(y["a"])({},Object(g["b"])(["winner"]))},x=j,$=(n("d279"),Object(i["a"])(x,_,O,!1,null,null,null)),P=$.exports,k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"gameZone"},[n("matrix",{attrs:{lines:this.lines,squares:this.squares}})],1)},C=[],E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"matrix"},e._l(e.lines,(function(t){return n("div",{key:t,staticClass:"line"},e._l(e.squares,(function(e){return n("square",{key:e})})),1)})),0)},U=[],L=(n("a623"),n("4160"),n("a9e3"),n("159b"),n("2909")),N=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"square white"})},M=[],T={name:"square",methods:{}},I=T,A=(n("9df6"),Object(i["a"])(I,N,M,!1,null,null,null)),G=A.exports,V=(n("d3b7"),{methods:{randomInteger:function(e,t){var n=e+Math.random()*(t-e);return Math.floor(n)},promise:function(){var e=new Promise((function(e,t){e(),t(new Error("in selected something broke"))}));return e}}}),W={name:"matrix",mixins:[V],components:{square:G},props:{lines:{type:Number,default:5},squares:{type:Number,default:5}},data:function(){return{allSquares:[],max:null,randomValues:[],randomSquare:null,gameTime:null}},computed:Object(y["a"])({},Object(g["b"])({isUser:"isUser",user:"userSelect",computer:"computerSelect",userName:"name",delay:"delay",Squares:"squares",Lines:"lines",selected:"selected"})),methods:{squaresArray:function(){var e=document.querySelector(".matrix");this.allSquares=Object(L["a"])(e.querySelectorAll(".square")),this.max=this.allSquares.length},randomSelect:function(){this.allSquares[this.randomSquare].classList.remove("white"),this.allSquares[this.randomSquare].classList.add("blue")},computerSelect:function(){this.allSquares[this.randomSquare].classList.remove("blue","white"),this.allSquares[this.randomSquare].classList.add("red"),this.$store.commit("computerSelect"),this.$store.commit("isUser",!1)},userSelect:function(e){e.target===this.allSquares[this.randomSquare]&&(e.target.classList.remove("blue","white"),e.target.classList.add("green"),this.$store.commit("userSelect"),this.$store.commit("isUser",!0))},winner:function(){this.computer>this.user&&this.$store.commit("name","Computer"),this.$store.commit("winner","".concat(this.userName," Win")),this.$store.dispatch("pushWinner",this.userName)},getUnique:function(){var e=this.randomInteger(0,this.max),t=this.randomValues.every((function(t){return t!==e}));t?(this.randomSquare=e,this.randomValues.push(e)):this.getUnique()},playGame:function(){var e=this,t=Math.ceil(this.max/2);this.computer>=t||this.user>=t?(clearInterval(this.gameTime),this.winner(),this.$store.commit("play")):this.promise().then(this.getUnique()).then(this.randomSelect()).then(setTimeout((function(){e.isUser||e.computerSelect(),e.$store.commit("isUser",!1)}),this.delay)).catch((function(e){return console.log(e)}))},reset:function(){this.randomValues=[],this.randomSquare=null,this.gameTime=null,this.allSquares.forEach((function(e){e.classList.remove("blue","green","red"),e.classList.add("white")}))},init:function(e){var t=this;"Pick game mode"===this.selected||""===this.selected?e.preventDefault():(this.reset(),this.squaresArray(),this.gameTime=setInterval((function(){t.playGame()}),this.delay+10))}},mounted:function(){document.getElementById("play").addEventListener("click",this.init,!1),document.querySelector(".matrix").addEventListener("click",this.userSelect)}},B=W,D=(n("3ed6"),Object(i["a"])(B,E,U,!1,null,null,null)),z=D.exports,J={name:"game",components:{matrix:z},computed:Object(y["a"])({},Object(g["b"])(["lines","squares"]))},F=J,H=(n("d626"),Object(i["a"])(F,k,C,!1,null,null,null)),R=H.exports,Y={name:"gameplay",components:{presets:q,message:P,gamezone:R}},Z=Y,K=(n("45ac"),Object(i["a"])(Z,f,p,!1,null,null,null)),Q=K.exports,X=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"leaders"},[n("div",{staticClass:"content"},[n("h2",[e._v("Leader Board")]),n("ul",e._l(e.winners,(function(t){return n("li",{key:t.id},[n("div",{staticClass:"info"},[n("p",{staticClass:"name"},[e._v(e._s(t.winner.trim().slice(0,15)))]),n("p",{staticClass:"date"},[e._v(e._s(t.date))])])])})),0)])])},ee=[],te={name:"leaders",computed:Object(y["a"])({},Object(g["b"])(["winners"])),beforeCreate:function(){this.$store.dispatch("winners")}},ne=te,re=(n("22b7"),Object(i["a"])(ne,X,ee,!1,null,null,null)),se=re.exports,ae={name:"game",components:{gameplay:Q,leaders:se}},ie=ae,ce=(n("acb9"),Object(i["a"])(ie,m,d,!1,null,null,null)),ue=ce.exports;r["a"].use(l["a"]);var oe=[{path:"*",redirect:"/game",component:ue},{path:"/",redirect:"/game",component:ue},{path:"/game",name:"game",component:ue}],le=new l["a"]({routes:oe}),me=le,de=(n("99af"),n("d81d"),n("a434"),n("b64b"),n("bc3a")),fe=n.n(de);r["a"].use(g["a"]);var pe=fe.a.create({baseURL:"https://starnavi-frontend-test-task.herokuapp.com/",timeout:1e3,headers:{"content-type":"application/json; charset=utf-8"}}),he=function(){return{userSelect:0,computerSelect:0,isUser:!1,winner:"",name:"",play:!1,selected:""}},ve={state:{presets:[],winners:[],lines:null,squares:null,delay:null},getters:{Presets:function(e){return e.presets},winners:function(e){return e.winners},lines:function(e){return e.lines},squares:function(e){return e.squares},delay:function(e){return e.delay}},mutations:{Presets:function(e,t){e.presets=t},winners:function(e,t){e.winners=t},pushWinner:function(e,t){e.winners.push(t)},lines:function(e,t){e.lines=t},squares:function(e,t){e.squares=t},delay:function(e,t){e.delay=t}},actions:{Presets:function(e){pe.get("/game-settings").then((function(t){var n=Object.keys(t.data).map((function(e){return{name:e,field:t.data[e].field,delay:t.data[e].delay}}));n.unshift({name:"Pick game mode",field:null,delay:null}),e.commit("Presets",n)})).catch((function(e){return console.error(e)}))},pushWinner:function(e,t){var n=new Date,r={month:"long",day:"numeric"},s=n.getHours(),a=n.getMinutes()<10?"0"+n.getMinutes():n.getMinutes(),i=n.toLocaleString("en-US",r),c=n.getFullYear(),u={winner:t,date:"".concat(s,":").concat(a,"  ").concat(i,"  ").concat(c)};pe.post("/winners",u).then((function(){e.dispatch("winners")})).catch((function(e){return console.error(e)}))},winners:function(e){pe.get("/winners").then((function(t){var n=t.data.splice(t.data.length-4,4);e.commit("winners",n)})).catch((function(e){return console.error(e)}))}}},ye={state:he(),getters:{userSelect:function(e){return e.userSelect},computerSelect:function(e){return e.computerSelect},isUser:function(e){return e.isUser},winner:function(e){return e.winner},name:function(e){return e.name},play:function(e){return e.play},selected:function(e){return e.selected}},mutations:{userSelect:function(e){e.userSelect+=1},computerSelect:function(e){e.computerSelect+=1},isUser:function(e,t){e.isUser=t},winner:function(e,t){e.winner=t},name:function(e,t){e.name=t},play:function(e){e.play=!0},selected:function(e,t){e.selected=t},resetState:function(e){Object.assign(e,he())}}},ge=new g["a"].Store({modules:{server:ve,local:ye}});r["a"].config.productionTip=!1,new r["a"]({router:me,store:ge,render:function(e){return e(o)}}).$mount("#app")},"58d9":function(e,t,n){},"5c0b":function(e,t,n){"use strict";var r=n("9c0c"),s=n.n(r);s.a},"73af":function(e,t,n){},"843b":function(e,t,n){"use strict";var r=n("58d9"),s=n.n(r);s.a},9972:function(e,t,n){},"9c0c":function(e,t,n){},"9df6":function(e,t,n){"use strict";var r=n("4112"),s=n.n(r);s.a},a111:function(e,t,n){},a3ff:function(e,t,n){},acb9:function(e,t,n){"use strict";var r=n("73af"),s=n.n(r);s.a},d279:function(e,t,n){"use strict";var r=n("a111"),s=n.n(r);s.a},d626:function(e,t,n){"use strict";var r=n("9972"),s=n.n(r);s.a},f28a:function(e,t,n){}});
//# sourceMappingURL=app.424ef737.js.map